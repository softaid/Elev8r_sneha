/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/OverflowToolbarButton","sap/m/library","sap/m/MenuButton","sap/ui/core/library","sap/ui/Device","sap/ui/core/ShortcutHintsMixin","sap/ui/core/theming/Parameters"],function(e,t,n,a,r,i,o){"use strict";var s=a.aria.HasPopup;var u;var l={createSettingsButton:function(e,t){if(!u){this._loadResourceBundle()}var n=this._createButton(e+"-settings",{icon:"sap-icon://action-settings",text:u.getText("table.SETTINGS"),press:t,tooltip:u.getText("table.SETTINGS"),ariaHasPopup:s.Dialog});i.addConfig(n,{addAccessibilityLabel:true,messageBundleKey:r.os.macintosh?"mdc.PERSONALIZATION_SHORTCUT_MAC":"mdc.PERSONALIZATION_SHORTCUT"},t[1]);return n},createPasteButton:function(e){var t=this._createButton(e+"-paste");sap.ui.require(["sap/m/plugins/PasteProvider"],function(n){t.addDependent(new n({pasteFor:e+"-innerTable"}))});return t},createExportButton:function(e,a){if(!u){this._loadResourceBundle()}var s=o.get({name:"_sap_ui_mdc_table_Table_ExportButtonType"});var l=new n(e+"-export",{icon:"sap-icon://excel-attachment",tooltip:u.getText("table.EXPORT_BUTTON_TEXT"),type:t.ButtonType[s],buttonMode:t.MenuButtonMode.Split,useDefaultActionOnly:true,defaultAction:a.default});sap.ui.getCore().loadLibrary("sap.ui.unified",{async:true}).then(function(){sap.ui.require(["sap/m/Menu","sap/m/MenuItem"],function(e,t){var n=new e({items:[new t({text:u.getText("table.QUICK_EXPORT"),press:a.default}),new t({text:u.getText("table.EXPORT_WITH_SETTINGS"),press:a.exportAs})]});l.setMenu(n)})});i.addConfig(l._getButtonControl(),{addAccessibilityLabel:true,messageBundleKey:r.os.macintosh?"table.SHORTCUT_EXPORT_TO_EXCEL_MAC":"table.SHORTCUT_EXPORT_TO_EXCEL"},a.exportAs[1]);return l},_createButton:function(t,n){return new e(t,n)},_loadResourceBundle:function(){u=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")},showPanel:function(e,t,n){l["showUI"+t](e,n)},showUIColumns:function(e){if(e.getInbuiltFilter()){e.getInbuiltFilter().setVisibleFields(null)}e.getEngine().uimanager.show(e,e.getActiveP13nModes())},showUIFilter:function(e,t){var n=(t||[]).map(function(e){return e.name});if(e.getInbuiltFilter()){e.getInbuiltFilter().setVisibleFields(n)}e.getEngine().uimanager.show(e,"Filter")},createSort:function(e,t,n,r){e.getEngine().createChanges({control:e,key:"Sort",state:[{selected:true,name:t,descending:n===a.SortOrder.Descending,sorted:n!==a.SortOrder.None}],applyAbsolute:r})},createGroup:function(e,t){var n={grouped:true,name:t};var a=[n];e.getCurrentState().groupLevels.some(function(e){if(e.name==t){a[0].grouped=false}});e.getEngine().createChanges({control:e,key:"Group",state:a,applyAbsolute:e._isOfType("ResponsiveTable")})},createAggregation:function(e,t){var n={name:t,aggregated:true};var a=[n];if(e.getCurrentState().aggregations[t]){n.aggregated=false}e.getEngine().createChanges({control:e,key:"Aggregate",state:a,applyAbsolute:false})},createColumnWidth:function(e,t,n){var a={name:t,width:n};var r=[a];e.getEngine().createChanges({control:e,key:"ColumnWidth",state:r,applyAbsolute:false})},moveColumn:function(e,t,n){var a=e.indexOfColumn(t);if(a===n){return}var r=e.getCurrentState(e).items||[];var i=r[a];e.getEngine().createChanges({control:e,key:"Column",state:[{name:i.name,position:n}]})}};return l});