/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/core/Popup","sap/ui/core/ResizeHandler","sap/ui/core/delegate/ItemNavigation","./SplitterRenderer","sap/ui/core/library","sap/ui/core/Configuration"],function(t,e,i,s,r,o,n,a,h){"use strict";var p=a.Orientation;var l=i.extend("sap.ui.commons.Splitter",{metadata:{library:"sap.ui.commons",deprecated:true,properties:{splitterOrientation:{type:"sap.ui.core.Orientation",group:"Behavior",defaultValue:p.Vertical},splitterPosition:{type:"sap.ui.core.Percentage",group:"Behavior",defaultValue:"50%"},minSizeFirstPane:{type:"sap.ui.core.Percentage",group:"Behavior",defaultValue:"0%"},minSizeSecondPane:{type:"sap.ui.core.Percentage",group:"Behavior",defaultValue:"0%"},width:{type:"sap.ui.commons.SplitterSize",group:"Behavior",defaultValue:"100%"},height:{type:"sap.ui.commons.SplitterSize",group:"Behavior",defaultValue:"100%"},showScrollBars:{type:"boolean",group:"Behavior",defaultValue:true},splitterBarVisible:{type:"boolean",group:"Behavior",defaultValue:true}},aggregations:{firstPaneContent:{type:"sap.ui.core.Control",multiple:true,singularName:"firstPaneContent"},secondPaneContent:{type:"sap.ui.core.Control",multiple:true,singularName:"secondPaneContent"}}}});l.prototype.onBeforeRendering=function(){if(this.sResizeListenerId){r.deregister(this.sResizeListenerId);this.sResizeListenerId=null}if(this.sSpecialResizeListenerId){r.deregister(this.sSpecialResizeListenerId);this.sSpecialResizeListenerId=null}};l.prototype.onAfterRendering=function(){this._recalculateInternals();this.sResizeListenerId=r.register(this.splitterDIV,t.proxy(this.onresize,this))};l.prototype._recalculateInternals=function(){this.splitterDIV=this.getDomRef();this.splitterBar=document.getElementById(this.getId()+"_SB");this.firstPane=document.getElementById(this.getId()+"_firstPane");this.secondPane=document.getElementById(this.getId()+"_secondPane");this.minSizeFP=this.getMinSizeFirstPane();this.minSizeSP=this.getMinSizeSecondPane();this.minSizeFP=this.minSizeFP.substring(0,this.minSizeFP.length-1);this.minSizeFP=parseFloat(this.minSizeFP);this.minSizeSP=this.minSizeSP.substring(0,this.minSizeSP.length-1);this.minSizeSP=parseFloat(this.minSizeSP);this.spOrientation=this.getSplitterOrientation();this.sBarPosition=this.getSplitterPosition();this.sBarPosition=this.sBarPosition.substring(0,this.sBarPosition.length-1);this.sBarPosition=parseFloat(this.sBarPosition);if(h.getTheme()=="sap_hcb"){this.sbSize=6}else{this.sbSize=4}this.resizeSplitterElements();var e=t(this.splitterBar).height();if(this.spOrientation==p.Vertical){if(e<=0||e>t(this.splitterDIV).height()){this.fixHeight()}}else{if(e<=0||e!=this.sbSize){this.fixHeight()}}};l.prototype.onresize=function(t){this.resizeSplitterElements()};l.prototype.resizeSplitterElements=function(){var e,i,s,r,o,n;if(this.spOrientation==p.Vertical){s=t(this.splitterDIV).width();if(s==0){s=100}e=this.sbSize*100/s;if(this.sBarPosition>=100||this.sBarPosition+e>100){this.sBarPosition=100-e;o=0}else{o=100-e-this.sBarPosition}t(this.firstPane).css("width",this.sBarPosition+"%");t(this.splitterBar).css("width",e+"%");t(this.secondPane).css("width",o+"%")}else{r=t(this.splitterDIV).height();if(r==0){r=100}i=this.sbSize*100/r;if(this.sBarPosition>=100||this.sBarPosition+i>100){this.sBarPosition=100-i;n=0}else{n=100-i-this.sBarPosition}t(this.firstPane).css("height",this.sBarPosition+"%");t(this.splitterBar).css("height",i+"%");t(this.secondPane).css("height",n+"%")}this.setProperty("splitterPosition",this.sBarPosition+"%",true);if(t(this.splitterDIV).height()==0&&!this.splitterDIV.style.height){t(this.splitterDIV).css("height","100px");t(this.splitterBar).css("height","100px")}};l.prototype.setSplitterPosition=function(t){if(this.getDomRef()){this.setProperty("splitterPosition",t,true);this._recalculateInternals()}else{this.setProperty("splitterPosition",t)}return this};l.prototype.setSplitterBarVisible=function(e){if(this.getDomRef()){this.setProperty("splitterBarVisible",e,true);var i=this.getSplitterOrientation()===p.Vertical?"sapUiVertical":"sapUiHorizontal";if(e){t(document.getElementById(this.getId()+"_SB")).removeClass(i+"SplitterBarHidden").addClass(i+"SplitterBar")}else{t(document.getElementById(this.getId()+"_SB")).removeClass(i+"SplitterBar").addClass(i+"SplitterBarHidden")}}else{this.setProperty("splitterBarVisible",e)}return this};l.prototype.fixHeight=function(){var e=t(this.splitterDIV.parentNode).height();var i=t(this.splitterDIV).height();if(e>i){i=e;var s=this.getHeight();if(s&&s.toLowerCase().indexOf("px")!=-1){i=parseInt(s)}if(s&&s.toLowerCase().indexOf("%")!=-1){var o=parseInt(s);if(o<100){i=t(this.splitterDIV).height()}}if(i<=0){i=e}}t(this.splitterDIV).css("height",i+"px");if(this.spOrientation==p.Vertical){t(this.splitterBar).css("height",i+"px")}var n=this.splitterDIV.parentNode;if(n){var a=t.proxy(this.onresizespecial,this);this.sSpecialResizeListenerId=r.register(n,a)}};l.prototype.exit=function(){if(this.sResizeListenerId){r.deregister(this.sResizeListenerId);this.sResizeListenerId=null}if(this.sSpecialResizeListenerId){r.deregister(this.sSpecialResizeListenerId);this.sSpecialResizeListenerId=null}};l.prototype.onresizespecial=function(e){var i=t(this.splitterDIV);var s=i.height();i.css("height","0px");var r=this.getDomRef();if(r&&window.getComputedStyle){window.getComputedStyle(r)}var o=t(e.target).height();var n=i.height();if(n!=o){i.css("height",o+"px");if(this.spOrientation==p.Vertical){t(this.splitterBar).css("height",o+"px")}}if(o<=0){i.css("height",s+"px");if(this.spOrientation==p.Vertical){t(this.splitterBar).css("height",s+"px")}}};l.prototype.onmousedown=function(e){if(e.target!=this.splitterBar){return}var i=t(document.body);i.on("selectstart",t.proxy(this.splitterSelectStart,this));var r=t(this.splitterBar).offset();var o=t(this.splitterBar).height();var n=t(this.splitterBar).width();var a;if(this.spOrientation==p.Vertical){a="sapUiVSBGhost"}else{a="sapUiHSBGhost"}var h=s.getLastZIndex()+5;if(h<20){h=20}t(document.body).append('<div id="'+this.getId()+'_ghost" class="'+a+'" style =" height:'+o+"px; width:"+n+"px; left:"+r.left+"px; top:"+r.top+"px;z-index:"+h+'"></div>');t(document.body).append('<div id="'+this.getId()+'_overlay" style ="left: 0px;'+" right: 0px; bottom: 0px; top: 0px; position:fixed; z-index:"+h+'" ></div>');t(document).on("mouseup",t.proxy(this.onGhostMouseRelease,this));t(document).on("mousemove",t.proxy(this.onGhostMouseMove,this));t(this.splitterBar).trigger("focus");e.preventDefault();e.stopPropagation()};l.prototype.splitterSelectStart=function(t){t.preventDefault();t.stopPropagation();return false};l.prototype.onGhostMouseRelease=function(e){var i,s,r;var o=document.getElementById(this.getId()+"_ghost");var n=h.getRTL();if(this.spOrientation==p.Vertical){if(!n){i=e.pageX-t(this.firstPane).offset().left;r=t(this.splitterDIV).width();i=i*100/r}else{i=e.pageX-t(this.secondPane).offset().left;r=t(this.splitterDIV).width();i=(r-i)*100/r}}else{i=e.pageY-t(this.firstPane).offset().top;s=t(this.splitterDIV).height();i=i*100/s}if(i<this.minSizeFP){i=this.minSizeFP}else if(100-i<this.minSizeSP){i=100-this.minSizeSP}this.sBarPosition=i;this.resizeSplitterElements();t(o).remove();t(document.getElementById(this.getId()+"_overlay")).remove();var a=t(document.body);a.off("selectstart",this.splitterSelectStart);t(document).off("mouseup",this.onGhostMouseRelease);t(document).off("mousemove",this.onGhostMouseMove)};l.prototype.onGhostMouseMove=function(e){var i=document.getElementById(this.getId()+"_ghost");var s;var r;var o=h.getRTL();var n=t(this.firstPane).offset().left;var a=t(this.splitterDIV).width();var l=t(this.secondPane).offset().left;if(this.getSplitterOrientation()==p.Vertical){if(!o){r=n+a*this.minSizeFP/100;s=n+a*(100-this.minSizeSP)/100;if(e.pageX>r&&e.pageX<s){t(i).css("left",e.pageX+"px")}}else{r=l+a*this.minSizeSP/100;s=l+a*(100-this.minSizeFP)/100;if(e.pageX>r&&e.pageX<s){t(i).css("left",e.pageX+"px")}}}else{var f=t(this.splitterDIV).height();r=t(this.firstPane).offset().top+f*this.minSizeFP/100;s=t(this.secondPane).offset().top+t(this.secondPane).height()-f*this.minSizeSP/100;if(e.pageY>r&&e.pageY<s){t(i).css("top",e.pageY+"px")}}};l.prototype.getCtrlKey=function(t){return!!(t.ctrlKey||t.metaKey)};l.prototype.checkModifierKey=function(t,e,i,s){return t.shiftKey==s&&t.altKey==i&&this.getCtrlKey(t)==e};l.prototype.onsaphome=function(t){if(t.target==this.splitterBar){this.sBarPosition=this.minSizeFP;this.resizeSplitterElements();t.preventDefault();t.stopPropagation()}};l.prototype.onsapend=function(t){if(t.target==this.splitterBar){this.sBarPosition=100-this.minSizeSP;this.resizeSplitterElements();t.preventDefault();t.stopPropagation()}};l.prototype.onArrowKeys=function(e,i){var s,r,o,n,a;if(this.spOrientation==p.Vertical){s=t(this.splitterDIV).width();n=t(this.firstPane).width();n=n*100/s;o=10*100/s}else{r=t(this.splitterDIV).height();n=t(this.firstPane).height();n=n*100/r;o=10*100/r}if(i=="false"){a=n-o}else if(i=="true"){a=n+o}if(a<this.minSizeFP){a=this.minSizeFP}else if(100-a<this.minSizeSP){a=100-this.minSizeSP}this.sBarPosition=a;this.resizeSplitterElements()};l.prototype.onsapupmodifiers=function(t){if(this.checkModifierKey(t,false,false,true)){if(t.target==this.splitterBar){if(this.spOrientation==p.Horizontal){this.onArrowKeys(t,"false")}else{this.onsapleftmodifiers(t)}}t.preventDefault();t.stopPropagation()}};l.prototype.onsapdownmodifiers=function(t){if(this.checkModifierKey(t,false,false,true)){if(t.target==this.splitterBar){if(this.spOrientation==p.Horizontal){this.onArrowKeys(t,"true")}else{this.onsaprightmodifiers(t)}}t.preventDefault();t.stopPropagation()}};l.prototype.onsapleftmodifiers=function(t){if(this.checkModifierKey(t,false,false,true)){if(t.target==this.splitterBar){if(this.spOrientation==p.Vertical){var e=h.getRTL();if(e){this.onArrowKeys(t,"true")}else{this.onArrowKeys(t,"false")}}else{this.onsapupmodifiers(t)}}t.preventDefault();t.stopPropagation()}};l.prototype.onsaprightmodifiers=function(t){if(this.checkModifierKey(t,false,false,true)){if(t.target==this.splitterBar){if(this.spOrientation==p.Vertical){var e=h.getRTL();if(e){this.onArrowKeys(t,"false")}else{this.onArrowKeys(t,"true")}}else{this.onsapdownmodifiers(t)}}t.preventDefault();t.stopPropagation()}};l.prototype.ondragstart=function(t){if(t.target!=this.splitterBar){return}t.preventDefault();t.stopPropagation()};l.prototype.getText=function(t,e){var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.commons");if(i){return i.getText(t,e)}return t};return l});