/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
sap.ui.define(["./GeoJsonLayer","jquery.sap.global","sap/base/Log","./library"],function(e,t,r,a){"use strict";var i=e.extend("sap.ui.vbm.FeatureCollection",{metadata:{library:"sap.ui.vbm",properties:{},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.vbm.Feature",multiple:true,singularName:"item"}},events:{click:{parameters:{featureId:{type:"string"}}},contextMenu:{parameters:{featureId:{type:"string"}}}}}});i.prototype.getDataObjects=function(){if(this.mbGeoJSONDirty){this._triggerFeatureCreation()}var e=[],a=[],i=[],s=[];t.extend(e,this.mFeatureColl);var n={};if(e.length){var o=this.getItems();for(var u=0,p=o?o.length:0,g;u<p;++u){g=o[u];n[g.getFeatureId()]=g}}for(var m=0,l,h,y;m<e.length;++m){l=e[m];if(h=n[l.K]){var c={};t.extend(c,l);l=e[m]=c;l.C=h.getColor();if(y=h.getTooltip()){l.TT=y}}switch(l.type){case"Polygon":case"MultiPolygon":a.push(l);break;case"LineString":case"MultiLineString":i.push(l);break;case"Point":case"MultiPoint":s.push(l);break;default:r.error("Unknown feature type",l.type,"sap.ui.vbm.FeatureCollection")}}return[{name:this.getId()+"_Polys",type:"N",E:a},{name:this.getId()+"_Lines",type:"N",E:i},{name:this.getId()+"_Points",type:"N",E:s}]};i.prototype.getDataRemoveObjects=function(){return[{name:this.getId()+"_Polys",type:"N"},{name:this.getId()+"_Lines",type:"N"},{name:this.getId()+"_Points",type:"N"}]};i.prototype.getFeaturesInfo=function(e){var t=[];for(var r=0,a=e.length,i;r<a;++r){i=e[r];t[i]={};t[i].BBox=this.mFeatureBBox[i];t[i].Midpoint=[(this.mFeatureBBox[i][0]+this.mFeatureBBox[i][1])/2,(this.mFeatureBBox[i][2]+this.mFeatureBBox[i][3])/2];t[i].Name=this.mNames[i];t[i].Properties=this.mFeatureProps[i]}return t};return i});