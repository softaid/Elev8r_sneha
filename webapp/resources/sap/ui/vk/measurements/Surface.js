/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/base/Log","sap/ui/base/EventProvider","sap/ui/core/Core","sap/ui/core/format/NumberFormat","../getResourceBundle","./Measurement","../glMatrix","./Settings","./Utils","../uuidv4"],function(e,t,r,i,a,s,n,o,u,m){"use strict";var c=6;var l=16;var d="http://www.w3.org/2000/svg";var h=t.extend("sap.ui.vk.measurements.Surface",{metadata:{library:"sap.ui.vk"},constructor:function(){t.call(this);var e=document.createElementNS(d,"svg");e._surface=this;e.setAttribute("id","measurement-surface-"+m());e.classList.add("sapUiVizKitMeasurementSurface");e.innerHTML="<defs>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-start-highlighted'>"+"<polygon points='6 0, 6 4, 0 2'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-end-highlighted'>"+"<polygon points='0 0, 6 2, 0 4'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-start0'>"+"<polygon points='6 0, 6 4, 0 2'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-end0'>"+"<polygon points='0 0, 6 2, 0 4'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-start1'>"+"<polygon points='6 0, 6 4, 0 2'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-end1'>"+"<polygon points='0 0, 6 2, 0 4'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-start2'>"+"<polygon points='6 0, 6 4, 0 2'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-end2'>"+"<polygon points='0 0, 6 2, 0 4'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-start3'>"+"<polygon points='6 0, 6 4, 0 2'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-end3'>"+"<polygon points='0 0, 6 2, 0 4'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-start4'>"+"<polygon points='6 0, 6 4, 0 2'/>"+"</marker>"+"<marker markerWidth='6' markerHeight='4' refX='3' refY='2' orient='auto' id='arrow-end4'>"+"<polygon points='0 0, 6 2, 0 4'/>"+"</marker>"+"</defs>";var r=document.createElementNS(d,"g");var i=document.createElementNS(d,"g");var a=document.createElementNS(d,"g");e.append(r,i,a);this._svgDomRef=e;this._featuresDomRef=r;this._measurementsDomRef=i;this._measurementsUnderConstructionDomRef=a;this._features=[];this._measurements=[];this._measurementsUnderConstruction=[];this._settings=o.load();this._settings.scale=1}});h.prototype.destroy=function(){if(this._svgDomRef!=null){this._svgDomRef.remove();this._svgDomRef._surface=null}this._svgDomRef=null;this._featuresDomRef=null;this._measurementsDomRef=null;this._measurementsUnderConstructionDomRef=null;this._features=null;this._measurements=null;this._measurementsUnderConstruction=null;this._settings=null;t.prototype.destroy(this)};h.prototype.getDomRef=function(){return this._svgDomRef};h.prototype.addMeasurement=function(e){this._addMeasurement(e,false);this.fireMeasurementsAdded({measurements:[e]});return this};h.prototype._addMeasurement=function(e,t){var r;if(e.isDistance){r=document.createElementNS(d,"g");r.dataset.sapUiVkMeasurement=true;var i=document.createElementNS(d,"line");var a=document.createElementNS(d,"rect");var s=document.createElementNS(d,"text");s.appendChild(document.createTextNode(""));r.append(i,a,s)}else if(e.isAngle){r=document.createElementNS(d,"g");r.dataset.sapUiVkMeasurement=true;var n=document.createElementNS(d,"path");var o=document.createElementNS(d,"path");o.classList.add("sapUiVizKitMeasurementDashed");var u=document.createElementNS(d,"path");u.classList.add("sapUiVizKitMeasurementDotted");var m=document.createElementNS(d,"path");var c=document.createElementNS(d,"rect");var l=document.createElementNS(d,"text");l.appendChild(document.createTextNode(""));r.append(n,o,u,m,c,l)}else if(e.isArea){r=document.createElementNS(d,"g");r.dataset.sapUiVkMeasurement=true;var h=document.createElementNS(d,"path");h.classList.add("sapUiVizKitMeasurementFill");h.setAttribute("opacity",.5);var v=document.createElementNS(d,"path");v.classList.add("sapUiVizKitMeasurementStroke");v.setAttribute("opacity",.5);var f=document.createElementNS(d,"path");f.classList.add("sapUiVizKitMeasurementArea");var p=document.createElementNS(d,"path");p.classList.add("sapUiVizKitMeasurementAreaEdgeIntersecting");var g=document.createElementNS(d,"rect");var y=document.createElementNS(d,"text");y.appendChild(document.createTextNode(""));r.append(h,v,f,p,g,y)}else{throw new Error("Unknown measurement object")}if(t){this._measurementsUnderConstruction.push(e);this._measurementsUnderConstructionDomRef.appendChild(r)}else{this._measurements.push(e);this._measurementsDomRef.appendChild(r)}r._measurement=e;return this};h.prototype.removeMeasurement=function(e){this.fireMeasurementsRemoving({measurements:[e]});this._removeMeasurement(e,false);return this};h.prototype._removeMeasurement=function(e,t){var r;var i;if(t){r=this._measurementsUnderConstruction;i=this._measurementsUnderConstructionDomRef}else{r=this._measurements;i=this._measurementsDomRef}var a=r.indexOf(e);if(a>=0){r.splice(a,1);i.children[a].remove()}e.getFeatures().forEach(function(e){if(e){this.removeFeature(e)}},this);return this};h.prototype.beginMeasurementConstruction=function(e){this._addMeasurement(e,true);return this};h.prototype.endMeasurementConstruction=function(e){var t=this._measurementsUnderConstruction.indexOf(e);if(t>=0){this._measurementsUnderConstruction.splice(t,1);this._measurements.push(e);this._measurementsDomRef.appendChild(this._measurementsUnderConstructionDomRef.children[t]);this.fireMeasurementsAdded({measurements:[e]})}return this};h.prototype.cancelMeasurementConstruction=function(e){this._removeMeasurement(e,true);return this};h.prototype.highlightMeasurement=function(e,t,r,i){var a=this._measurements;var s=a.indexOf(e);if(s<0){return}e.setHighlighted(t);var n=this._measurementsDomRef.children[s];var o=n.children[0];var u=this.getMeasurementArrowColorCode();if(t){if(u!==""){n.classList.remove("sapUiVizKitMeasurement"+u)}n.classList.add("sapUiVizKitMeasurementHighlighted");if(e.isArea){n.children[2].removeAttribute("opacity")}else{o.setAttribute("marker-start","url(#arrow-start-highlighted)");o.setAttribute("marker-end","url(#arrow-end-highlighted)")}e.getFeatures().forEach(function(e){if(e){this.addFeature(e);var t=this._features.indexOf(e);if(t>=0){v(this._featuresDomRef.children[t],e,r,i,this._settings)}}},this)}else{n.classList.remove("sapUiVizKitMeasurementHighlighted");if(u!==""){n.classList.add("sapUiVizKitMeasurement"+u)}if(e.isArea){n.children[2].setAttribute("opacity",.5)}else{o.setAttribute("marker-start","url(#arrow-start"+u+")");o.setAttribute("marker-end","url(#arrow-end"+u+")")}e.getFeatures().forEach(function(e){if(e){this.removeFeature(e)}},this)}};h.prototype.getMeasurements=function(){return this._measurements};h.prototype.getMeasurementById=function(e){return this._measurements.find(function(t){return t.getId()===e})};h.prototype.addFeature=function(e){if(this._features.indexOf(e)>=0){return this}var t;if(e.isVertex){t=document.createElementNS(d,"circle")}else if(e.isEdge){t=document.createElementNS(d,"line")}else if(e.isFace){t=document.createElementNS(d,"g");var r=document.createElementNS(d,"path");var i=document.createElementNS(d,"path");i.classList.add("sapUiVizKitMeasurementContour");t.append(r,i)}else{throw new Error("Unknown measurement feature")}this._features.push(e);this._featuresDomRef.append(t);return this};h.prototype.removeFeature=function(e){var t=this._features;var r=t.indexOf(e);if(r>=0){t.splice(r,1);this._featuresDomRef.children[r].remove()}return this};function v(e,t,r,i,a){var s=null;if(t.isVertex){s=V}else if(t.isEdge){s=x}else if(t.isFace){s=U}if(s!=null){s(e,t,r,i,a)}}h.prototype.update=function(e,t){var r;var i;var a=this._measurements;var s=this._measurementsDomRef.children;for(var n=0;n<2;++n){for(r=0,i=a.length;r<i;++r){var o=a[r];var u=s[r];if(o.getVisible()){u.setAttribute("visibility","visible")}else{u.setAttribute("visibility","hidden");continue}var m=null;if(o.isDistance){m=b}else if(o.isAngle){m=S}else if(o.isArea){m=D}if(m!=null){m(u,o,e,t,this._settings)}}a=this._measurementsUnderConstruction;s=this._measurementsUnderConstructionDomRef.children}var c=this._features;var l=this._featuresDomRef.children;for(r=0,i=c.length;r<i;++r){v(l[r],c[r],e,t,this._settings)}return this};var f=new Map;r.attachLocalizationChanged(function(){f.clear()});function p(e,t){var r=t.precision;var s=t.units;var n=t.scale*u.getUnitFactor(s);var o=f.get(r);if(o==null){o=i.getFloatInstance({minFractionDigits:r,maxFractionDigits:r});f.set(r,o)}var m=a().getText("MEASUREMENTS_DISTANCE_VALUE",[o.format(e*n),u.translateUnits(s)]);return m}function g(e,t,r,i,a,s){e.childNodes[0].data=r;var n=e.getBBox().width+10;var o=26;var u=i-n*.5;var m=a-o*.5;if(s&&s.x>=u&&s.x<=u+n&&s.y>=m&&s.y<=m+o){a-=o;m-=o}t.x.baseVal.value=u;t.y.baseVal.value=m;t.width.baseVal.value=n;e.setAttribute("x",i);e.setAttribute("y",a)}function y(e,t,r){var i=r?"sapUiVizKitMeasurementHighlighted":"sapUiVizKitMeasurement"+t;if(!e.classList.contains(i)){e.classList.forEach(function(e,t,r){r.remove(e)});e.classList.add(i)}}function b(e,t,r,i,a){var s=w(a);var n=t.getHighlighted();y(e,s,n);var o=t.getPoint1();var u=t.getPoint2();var m=r.projectToScreen(o[0],o[1],o[2],i);var l=r.projectToScreen(u[0],u[1],u[2],i);var d=e.children[0];if(t.getShowArrows()){var h=l.x-m.x;var v=l.y-m.y;var f=Math.sqrt(h*h+v*v);if(Math.abs(f)<1e-5){e.setAttribute("visibility","hidden");return this}var b=c*h/f;var A=c*v/f;d.x1.baseVal.value=m.x+b;d.y1.baseVal.value=m.y+A;d.x2.baseVal.value=l.x-b;d.y2.baseVal.value=l.y-A;d.setAttribute("marker-start",n?"url(#arrow-start-highlighted)":"url(#arrow-start"+s+")");d.setAttribute("marker-end",n?"url(#arrow-end-highlighted)":"url(#arrow-end"+s+")")}else{d.x1.baseVal.value=m.x;d.y1.baseVal.value=m.y;d.x2.baseVal.value=l.x;d.y2.baseVal.value=l.y;d.removeAttribute("marker-start");d.removeAttribute("marker-end")}e.removeAttribute("visibility");var M=(m.x+l.x)*.5;var _=(m.y+l.y)*.5;g(e.children[2],e.children[1],p(t.getDistance(),a),M,_,m);return this}function A(e,t,r,i){var a=i|0;var s=e.projectToScreen(r[a+0],r[a+1],r[a+2],t);return[s.x,s.y,0]}function M(e,t,r){var i=r|0;var a=n.vec3.fromValues(t[i],t[i+1],t[i+2]);n.vec3.transformMat4(a,a,e);return a}function _(e,t,r,i){var a=M(r,i);return A(e,t,a)}function E(e,t){return n.vec3.fromValues(t*Math.cos(e),t*Math.sin(e),0)}function S(e,t,r,s,o){var m=w(o);var d=t.getHighlighted();y(e,m,d);var h=t.getPoints();var v=[h[6],h[7],h[8]];var p=[h[9],h[10],h[11]];var b=u.pointMinusPoint(v,p);b=u.pointMinusPoint(h,b);var A=[h[15],h[16],h[17]];var S=u.normalize(u.crossProduct(u.computeEdgeDirection(p,b),u.computeEdgeDirection(p,A)));var k=n.mat4.create();var D=n.quat.create();n.quat.rotationTo(D,n.vec3.fromValues(0,0,1),n.vec3.fromValues(S[0],S[1],S[2]));n.mat4.fromRotationTranslation(k,D,n.vec3.fromValues(p[0],p[1],p[2]));var V=n.mat4.create();n.mat4.invert(V,k);var x=M(V,h,0);var U=M(V,h,3);var R=M(V,v);var C=M(V,p);var N=M(V,h,12);var L=M(V,h,15);var P=_(r,s,k,x);var T=_(r,s,k,U);var F="M"+P[0]+" "+P[1]+" L"+T[0]+" "+T[1];var H=u.computePointToPointDistance(x,U);var I=u.computePointToPointDistance(C,N);var z=u.computePointToPointDistance(C,L);var K=I>z?I:z;var j=t.getState();if(j>0&&H>0&&K>0){var W=_(r,s,k,N);var X=W;var Y=T;if(X[0]!==Y[0]||X[1]!==Y[1]){F+=" M"+X[0]+" "+X[1]}var O=_(r,s,k,L);F+=" L"+O[0]+" "+O[1];var B=u.computeEdgeDirection(U,x);var q=u.computeEdgeDirection(N,L);var J=t.getRadiusScale();var Z=J<0;var G=K*Math.abs(J);var Q=u.angleBetweenVectors2D(1,0,B[0],B[1]);var $=u.angleBetweenVectors2D(B[0],B[1],q[0],q[1]);if($<0){Q=u.angleBetweenVectors2D(B[0],B[1],-1,0);$=-$}var ee=Q+$/2;var te=t.getAngle();var re=Math.PI/180;X=_(r,s,k,E(ee,G));Y=_(r,s,k,E(ee+re,G));var ie=re*c/u.computePointToPointDistance(X,Y);if(Z){ee+=Math.PI;te=2*Math.PI-te;$=$-2*Math.PI;ie=-ie}var ae=Math.ceil(Math.abs($)/(Math.PI/2));var se=Q+ie;var ne=($-ie-ie)/ae;var oe="";for(var ue=0;ue<ae;++ue){var me=E(se+ne*ue,G);var ce=E(se+ne*(1+ue),G);var le=me[0];var de=me[1];var he=ce[0];var ve=ce[1];var fe=le*le+de*de;var pe=fe+le*he+de*ve;var ge=4/3*(Math.sqrt(2*fe*pe)-pe)/(le*ve-de*he);var ye=[le-ge*de,de+ge*le,0];var be=[he+ge*ve,ve-ge*he,0];if(ue===0){me=_(r,s,k,me);oe+=" M"+me[0]+" "+me[1]}ye=_(r,s,k,ye);be=_(r,s,k,be);ce=_(r,s,k,ce);oe+=" C"+ye[0]+" "+ye[1]+" "+be[0]+" "+be[1]+" "+ce[0]+" "+ce[1]}var Ae=e.children[0];Ae.setAttribute("d",oe);Ae.setAttribute("marker-start",d?"url(#arrow-start-highlighted)":"url(#arrow-start"+m+")");Ae.setAttribute("marker-end",d?"url(#arrow-end-highlighted)":"url(#arrow-end"+m+")");Ae.setAttribute("opacity",j===1?.5:1);Ae.removeAttribute("visibility");Ae=e.children[1];var Me=_(r,s,k,R);var _e=_(r,s,k,C);var Ee=Me[0]!==_e[0]||Me[1]!==_e[1];X=_e;Y=_(r,s,k,E(Q,G));var Se=u.computePointToPointDistance(X,Y)+l;var ke=u.computeEdgeDirection(X,Y);var De=u.pointPlusPoint(u.scalePoint(ke,Se),X);var Ve="";if(Ee){Ve="M"+X[0]+" "+X[1]+" L"+De[0]+" "+De[1]}else if(u.computeEdgeToPointDistance2(P,T,De)>.001){Ve="M"+P[0]+" "+P[1]+" L"+De[0]+" "+De[1]}X=_e;Y=_(r,s,k,E(Q+$,G));Se=u.computePointToPointDistance(X,Y)+l;ke=u.computeEdgeDirection(X,Y);De=u.pointPlusPoint(u.scalePoint(ke,Se),X);if(u.computeEdgeToPointDistance2(W,O,De)>.001){Ve+="M"+O[0]+" "+O[1]+" L"+De[0]+" "+De[1]}if(Ve.length>0){Ae.setAttribute("d",Ve);Ae.removeAttribute("visibility")}else{Ae.setAttribute("d","");Ae.setAttribute("visibility","hidden")}Ae=e.children[2];if(Ee){X=Me;Y=_e;Ae.setAttribute("d","M"+X[0]+" "+X[1]+" L"+Y[0]+" "+Y[1]);Ae.removeAttribute("visibility")}else{Ae.setAttribute("d","");Ae.setAttribute("visibility","hidden")}var xe=o.precision;var Ue=f.get(xe);if(Ue==null){Ue=i.getFloatInstance({minFractionDigits:xe,maxFractionDigits:xe});f.set(xe,Ue)}var we=a().getText("MEASUREMENTS_ANGLE_VALUE",Ue.format(180*te/Math.PI));X=_(r,s,k,E(ee,G));g(e.children[5],e.children[4],we,X[0],X[1],null);e.children[3].removeAttribute("visibility");e.children[4].removeAttribute("visibility");e.children[5].removeAttribute("visibility")}else{e.children[0].setAttribute("visibility","hidden");e.children[1].setAttribute("visibility","hidden");e.children[2].setAttribute("visibility","hidden");e.children[4].setAttribute("visibility","hidden");e.children[5].setAttribute("visibility","hidden")}var Re=e.children[3];Re.setAttribute("d",F);y(Re,"StrokeColor"+m,false);Re.removeAttribute("visibility");return this}function k(e,t){var r=t.precision;var s=t.units;var n=t.scale*u.getUnitFactor(s);var o=f.get(r);if(o==null){o=i.getFloatInstance({minFractionDigits:r,maxFractionDigits:r});f.set(r,o)}var m=a().getText("MEASUREMENTS_AREA_VALUE",[o.format(e*n*n),u.translateUnits(s,"2")]);return m}function D(e,t,r,i,a){var s=w(a);var n=t.getHighlighted();y(e,s,n);var o=t.getArea();var u=o&&o<0;if(u){o=-o}var m=t.getPoints();var c=e.children[2];var l=m?m.length:0;if(l>=6){var d="";for(var h=0;h<l;h+=3){var v=A(r,i,m,h);d+=(h===0?"M":" L")+v[0]+" "+v[1]}if(!u){d+=" Z"}c.setAttribute("d",d);c.removeAttribute("visibility")}else{c.setAttribute("visibility","hidden")}c.classList.remove("sapUiVizKitMeasurementAreaSelfIntersecting");var f=t.hasSelfIntersections();if(f){c.classList.add("sapUiVizKitMeasurementAreaSelfIntersecting")}var p=e.children[3];if(l>=6&&t.hasSelfIntersectionsLastEdge()){var b=A(r,i,m,l-6);var M=A(r,i,m,l-3);p.setAttribute("d","M"+b[0]+" "+b[1]+" L"+M[0]+" "+M[1]);p.removeAttribute("visibility")}else{p.setAttribute("visibility","hidden")}var _=t.getFeatures();if(_&&Array.isArray(_)&&_.length===1&&_[0].isFace){U(e,_[0],r,i,null)}else{e.children[0].setAttribute("d","");e.children[1].setAttribute("d","")}if(n||u){c.removeAttribute("opacity")}else{c.setAttribute("opacity",.5)}var E=e.children[4];var S=e.children[5];if(o&&!f){var D=A(r,i,t.getPosition());g(S,E,k(o,a),D[0],D[1],null);S.removeAttribute("visibility");E.removeAttribute("visibility")}else{S.setAttribute("visibility","hidden");E.setAttribute("visibility","hidden")}return this}function V(e,t,r,i,a){var s=t.getValue();var n=r.projectToScreen(s[0],s[1],s[2],i);e.cx.baseVal.value=n.x;e.cy.baseVal.value=n.y;return this}function x(e,t,r,i,a){var s=t.getValue();var n=r.projectToScreen(s[0],s[1],s[2],i);e.x1.baseVal.value=n.x;e.y1.baseVal.value=n.y;n=r.projectToScreen(s[3],s[4],s[5],i);e.x2.baseVal.value=n.x;e.y2.baseVal.value=n.y;return this}function U(e,t,r,i,a){var s=t.getValue();var n=s.vertices;var o=s.triangles;var u=s.edges;var m;var c;var l;var d;var h;h="";for(l=0,d=o?o.length:0;l<d;l+=3){m=o[l]*3;c=r.projectToScreen(n[m],n[m+1],n[m+2],i);h+="M"+c.x+" "+c.y;m=o[l+1]*3;c=r.projectToScreen(n[m],n[m+1],n[m+2],i);h+=" L"+c.x+" "+c.y;m=o[l+2]*3;c=r.projectToScreen(n[m],n[m+1],n[m+2],i);h+=" L"+c.x+" "+c.y+" Z "}e.children[0].setAttribute("d",h);h="";for(l=0,d=u?u.length:0;l<d;l+=2){m=u[l]*3;c=r.projectToScreen(n[m],n[m+1],n[m+2],i);h+="M"+c.x+" "+c.y;m=u[l+1]*3;c=r.projectToScreen(n[m],n[m+1],n[m+2],i);h+=" L"+c.x+" "+c.y}e.children[1].setAttribute("d",h);return this}h.prototype.hitTest=function(e,t){var r=this._svgDomRef;var i=r.getBoundingClientRect();var a=r.style;a.pointerEvents="auto";var s=document.elementFromPoint(e+i.x,t+i.y);a.pointerEvents="none";var n=s&&s.parentElement;return n!=null&&n.dataset.sapUiVkMeasurement==="true"?n:null};h.prototype.updateSettings=function(e){Object.assign(this._settings,e);return this};h.prototype.getScale=function(){return this._settings.scale};h.prototype.setScale=function(e){if(e!==this._settings.scale){var t={oldScale:this._settings.scale,newScale:e};this._settings.scale=e;this.fireScaleChanged(t)}return this};function w(e){return e.color}h.prototype.getMeasurementArrowColorCode=function(){return w(this._settings)};h.prototype.toJSON=function(e){var t=Array.isArray(e)?e:this._measurements;return{scale:this._settings.scale,measurements:t.map(function(e){return e.toJSON()})}};h.prototype.fromJSON=function(t,r){if("scale"in t){if(t.scale>0){this.setScale(t.scale)}else{e.error("Incorrect 'scale' value: "+t.scale)}}var i=t.measurements.map(s.createFromJSON);var a;if(r){a=this._measurements.slice()}else{a=t.measurements.map(function(e){return e.id}).map(this.getMeasurementById,this).filter(function(e){return e!=null})}if(a.length>0){this.fireMeasurementsRemoving({measurements:a});a.forEach(function(e){this._removeMeasurement(e,false)},this)}if(i.length>0){i.forEach(function(e){this._addMeasurement(e,false)},this);this.fireMeasurementsAdded({measurements:i})}};var R={measurementsAdded:"measurementsAdded",measurementsRemoving:"measurementsRemoving",scaleChanged:"scaleChanged"};h.prototype.attachMeasurementsAdded=function(e,t,r){return this.attachEvent(R.measurementsAdded,e,t,r)};h.prototype.detachMeasurementsAdded=function(e,t){return this.detachEvent(R.measurementsAdded,e,t)};h.prototype.fireMeasurementsAdded=function(e){return this.fireEvent(R.measurementsAdded,e)};h.prototype.attachMeasurementsRemoving=function(e,t,r){return this.attachEvent(R.measurementsRemoving,e,t,r)};h.prototype.detachMeasurementsRemoving=function(e,t){return this.detachEvent(R.measurementsRemoving,e,t)};h.prototype.fireMeasurementsRemoving=function(e){return this.fireEvent(R.measurementsRemoving,e)};h.prototype.attachScaleChanged=function(e,t,r){return this.attachEvent(R.scaleChanged,e,t,r)};h.prototype.detachScaleChanged=function(e,t){return this.detachEvent(R.scaleChanged,e,t)};h.prototype.fireScaleChanged=function(e){return this.fireEvent(R.scaleChanged,e)};return h});