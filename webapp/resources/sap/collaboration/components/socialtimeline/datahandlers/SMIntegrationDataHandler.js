/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/ui/base/Object","sap/collaboration/components/utils/OdataUtil","sap/ui/thirdparty/jquery"],function(t,a,e,n){"use strict";var o=a.extend("sap.collaboration.components.socialtimeline.datahandlers.SMIntegrationDataHandler",{constructor:function(a){this._oLogger=t.getLogger("sap.collaboration.components.socialtimeline.datahandlers.SMIntegrationDataHandler");this._oSMIntegrationModel=a;this._oOdataUtil=new e;this.oJamConfigurationStatusMap={configurationOk:0,configuartionError:1}},mapInternalBOToExternalBO:function(t){var a=this.getExternalObjectMapping(t).promise.then(function(t){this._oLogger.info("External business object mapping was found.");return t.MapInternalBOToExternalBO}.bind(this));return a.promise()},getJamConfigurationStatus:function(t,a){var e="/GetJamConfigurationStatus";var n=this;var o={async:false,success:function(a,e){if(a.GetJamConfigurationStatus.StatusCode===n.oJamConfigurationStatusMap.configurationOk){t(true)}else{t(false)}},error:function(t){n._oLogger.error(JSON.stringify(t));a()}};this._oSMIntegrationModel.read(e,o)},getExternalObjectMapping:function(t){var a=this;var e="/MapInternalBOToExternalBO";var o=n.Deferred();var r={};r["ApplicationContext"]="'"+t.appContext+"'";r["ODataCollection"]="'"+t.collection+"'";r["ODataKeyPredicate"]="'"+t.key+"'";r["ODataServicePath"]="'"+t.odataServicePath+"'";var i=function(t,e){a._oLogger.info("External object mapping found");o.resolve(t,e)};var s=function(t){a._oLogger.error(t.response.statusText);o.reject(t)};var u={context:null,urlParameters:r,async:true,filters:[],sorters:[],success:i,error:s};return{request:this._oSMIntegrationModel.read(e,u),promise:o.promise()}}});return o});