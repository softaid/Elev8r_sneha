/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/ui/layout/ResponsiveSplitter","sap/ui/layout/SplitterLayoutData","sap/m/ScrollContainer","sap/m/VBox","sap/m/BusyDialog","sap/ui/layout/SplitPane","sap/ui/layout/PaneContainer","sap/ui/core/library","sap/m/Text","../UIEvents"],function(e,t,n,i,a,s,o,r,h,l){function u(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}var p=r["Orientation"];var d=u(l);var f=e.extend("sap.esh.search.ui.controls.SearchLayoutResponsive",{renderer:{apiVersion:2},metadata:{properties:{searchIsBusy:{type:"boolean"},busyDelay:{type:"int"},combinedResultviewToolbar:{type:"boolean",defaultValue:false},unifiedToolbarsWithContextBar:{type:"boolean",defaultValue:true},showFacets:{type:"boolean"},showFooter:{type:"boolean"},facetPanelResizable:{type:"boolean",defaultValue:false},facetPanelWidthInPercent:{type:"int",defaultValue:"25"},animateFacetTransition:{type:"boolean",defaultValue:false},resultContainer:{type:"sap.ui.core.Control",multiple:false}},aggregations:{facets:{type:"sap.ui.core.Control",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false}}},constructor:function a(r,l){var u=this;e.prototype.constructor.call(this,r,l);var d=new i("",{items:[new h]});this._paneLeftContent=new s({requiredParentWidth:10,content:d});this._paneLeftContainer=new o({orientation:p.Vertical,panes:[this._paneLeftContent]});var f=new n("",{height:"100%",vertical:true});var g=new i("",{items:[f]});this._paneRightContent=new s({requiredParentWidth:10,content:g});var c=new i;c.addStyleClass("sapUiNoMarginBottom");this._paneRightHeader=new s({requiredParentWidth:10,content:c});this._paneRightContainer=new o({orientation:p.Vertical,panes:[this._paneRightHeader,this._paneRightContent]});this._paneLeftContainer.setLayoutData(new t({size:"0%",resizable:false}));this._paneRightHeader.setLayoutData(new t({size:"0%",resizable:false}));this._paneRightContainer.setLayoutData(new t({size:"100%"}));var C=new i("",{items:[]});this._paneMainContainer=new o({orientation:p.Horizontal,panes:[this._paneLeftContainer,this._paneRightContainer],resize:function e(){u.triggerUpdateLayout()}});this._paneMainFooter=new s({requiredParentWidth:10,content:C});this._paneMainContainer.setLayoutData(new t({size:"100%",resizable:false}));this._paneMainFooter.setLayoutData(new t({size:"0%",resizable:false}));var _=new o({orientation:p.Vertical,panes:[this._paneMainContainer,this._paneMainFooter]});this.setRootPaneContainer(_);this.setDefaultPane(this._paneRightContent)},getFacets:function e(){var t=this._paneLeftContent;if(t!==null&&t!==void 0&&t.getContent()){return t.getContent()}return undefined},setFacets:function e(t){this._facets=t;var n=this._paneLeftContent;if(n){this._paneLeftContainer.removeAllPanes();n.setContent(t);this._paneLeftContainer.addPane(n)}},getFooter:function e(){var t=this._paneMainFooter;if(t!==null&&t!==void 0&&t.getContent()){return t.getContent()}return undefined},setFooter:function e(t){this._footer=t;var n=this._paneMainFooter;if(n){this.getRootPaneContainer().removeAllPanes();n.setContent(t);this.getRootPaneContainer().addPane(this._paneMainContainer);this.getRootPaneContainer().addPane(n)}},getResultContainer:function e(){var t=this._paneRightContent.getContent();if(t){return t}return undefined},setResultContainer:function e(t){this._resultContainer=t;if(this._paneRightContent){this._paneRightContainer.removeAllPanes();this._paneRightContent.setContent(t);this._paneRightContainer.addPane(this._paneRightHeader);this._paneRightContainer.addPane(this._paneRightContent)}},setSearchIsBusy:function e(t){var n=this;if(t){if(this._busyFlag){return}if(this._busyTimeout){return}this._busyTimeout=setTimeout(function(){n._busyTimeout=null;n._setIsBusy(t)},this.getProperty("busyDelay"))}else{if(this._busyFlag){this._setIsBusy(t);return}if(this._busyTimeout){clearTimeout(this._busyTimeout);this._busyTimeout=null;return}}},_setIsBusy:function e(t){var n=this.getModel();if(t){if(n.config.isUshell){if(!this._busyIndicatorModal){this._busyIndicatorModal=new a}this._busyIndicatorModal.open()}else{this.setBusy(true)}this._busyFlag=true}else if(this._busyFlag){if(n.config.isUshell){if(this._busyIndicatorModal){this._busyIndicatorModal.close()}}else{this.setBusy(false)}this._busyFlag=false}this.setProperty("searchIsBusy",t,true)},setCombinedResultviewToolbar:function e(t){this.setProperty("combinedResultviewToolbar",t,true);return this},setUnifiedToolbarsWithContextBar:function e(t){this.setProperty("unifiedToolbarsWithContextBar",t,true);return this},setShowFacets:function e(n){var a;var s=this.getModel();if(!this._paneRightContainer){return}if(!this.getResultContainer()){return}if(this.getProperty("combinedResultviewToolbar")){var o=this._paneRightHeader.getContent();if(o.getItems().length===0){var r=this._resultContainer.getAggregation("combinedResultviewToolbar");r.addStyleClass("sapElisaSearchContainerCountBreadcrumbs");if(s.config.FF_optimizeForValueHelp){r.addStyleClass("sapElisaSearchContainerCountBreadcrumbsValueHelp")}if(!this.getProperty("unifiedToolbarsWithContextBar")){r.addItem(this._resultContainer.getProperty("countBreadcrumbsHiddenElement"))}this._paneRightContainer.removeAllPanes();this._paneRightHeader.setContent(r);this._paneRightContainer.addPane(this._paneRightHeader);this._paneRightContainer.addPane(this._paneRightContent)}}else if(this.getProperty("unifiedToolbarsWithContextBar")){var h=this._paneRightHeader.getContent();var l=this._resultContainer.getAggregation("combinedResultviewToolbar");if(l&&l instanceof i){l.addStyleClass("sapElisaSearchContainerCountBreadcrumbs");if(s.config.FF_optimizeForValueHelp){l.addStyleClass("sapElisaSearchContainerCountBreadcrumbsValueHelp")}if(h instanceof i&&h.getItems().length===0||this._paneRightHeader.getContent()!==l){this._paneRightContainer.removeAllPanes();this._paneRightHeader.setContent(l);this._paneRightContainer.addPane(this._paneRightHeader);this._paneRightContainer.addPane(this._paneRightContent)}}}else{var u=this._paneRightHeader.getContent();if(u){this._paneRightHeader.setLayoutData(new t({size:"0%",resizable:false}))}}var p=(a=this._footer)===null||a===void 0?void 0:a.getVisible();this.updateLayout(n,p,this.getProperty("combinedResultviewToolbar"),this.getProperty("unifiedToolbarsWithContextBar"));return this},setShowFooter:function e(t){if(!this._paneMainFooter){return}if(!this.getResultContainer()){return}var n=this===null||this===void 0?void 0:this._paneLeftContainer.getLayoutData();var i=n.getProperty("size").replace("%","");var a=parseInt(i);var s=a>0;this.updateLayout(s,t,this.getProperty("combinedResultviewToolbar"),this.getProperty("unifiedToolbarsWithContextBar"));return this},setFacetPanelWidthInPercent:function e(t){this.setProperty("facetPanelWidthInPercent",t,true);this._facetPanelWidthSizeIsOutdated=true;return this},triggerUpdateLayout:function e(){var t;var n=this===null||this===void 0?void 0:this._paneLeftContainer.getLayoutData();var i=n.getProperty("size").replace("%","");var a=parseInt(i);var s=a>0;var o=(t=this._footer)===null||t===void 0?void 0:t.getVisible();this.updateLayout(s,o,this.getProperty("combinedResultviewToolbar"),this.getProperty("unifiedToolbarsWithContextBar"))},updateLayout:function e(a,s,o,r){var l,u,p=this;var f=this._paneLeftContent;if((f===null||f===void 0?void 0:f.getContent())instanceof i){var g=f.getContent().getItems();if((g===null||g===void 0?void 0:g.length)>0&&g[0]instanceof h){this._paneLeftContainer.removeAllPanes();f.setContent(this._facets);this._paneLeftContainer.addPane(f)}}if(((l=this._paneRightContent)===null||l===void 0?void 0:l.getContent())instanceof i){var c=this._paneRightContent.getContent().getItems();if((c===null||c===void 0?void 0:c.length)>0&&c[0]instanceof n){if(c[0].getContent().length===0){this._paneRightContainer.removeAllPanes();this._paneRightContent.setContent(this._resultContainer);this._paneRightContainer.addPane(this._paneRightHeader);this._paneRightContainer.addPane(this._paneRightContent)}}}if(this._facets){if(this.getProperty("animateFacetTransition")){this._facets.addStyleClass("sapUshellSearchFacetAnimation")}else{this._facets.removeStyleClass("sapUshellSearchFacetAnimation")}}if(o&&!r){var C=0;C=C+2;var _=this._paneRightHeader.getContent().getItems()[0];if(_!==null&&_!==void 0&&_.getVisible()){C=C+2}C=C+2;this._paneRightHeader.setLayoutData(new t({size:"".concat(C,"rem"),resizable:false}))}else if(r){var y=0;y=y+2;this._paneRightHeader.setLayoutData(new t({size:"".concat(y,"rem"),resizable:false}))}else{this._paneRightHeader.destroy()}if(this!==null&&this!==void 0&&(u=this._paneLeftContent)!==null&&u!==void 0&&u.getContent()){var v;var P=this===null||this===void 0?void 0:this._paneLeftContainer.getLayoutData();if(!a){this._paneLeftContainer.setLayoutData(new t({size:"0%",resizable:false}));if(this._paneRightContainer){this._paneRightContainer.setLayoutData(new t({size:"100%"}))}}else{if(this._facetPanelWidthSizeIsOutdated){v=this.getProperty("facetPanelWidthInPercent");this._facetPanelWidthSizeIsOutdated=false}else{v=parseInt(P.getProperty("size").replace("%",""));if(v<1){if(this._previousFacetPanelWidthSize){v=this._previousFacetPanelWidthSize}else{v=this.getProperty("facetPanelWidthInPercent")}}}this._paneLeftContainer.setLayoutData(new t({size:v+"%",resizable:this.getProperty("facetPanelResizable")}));this._previousFacetPanelWidthSize=v;var b=100-v+"%";this._paneRightContainer.setLayoutData(new t({size:b}))}}var R=this._paneMainFooter.getContent();if(typeof R["getItems"]==="function"&&R["getItems"]().length===0&&typeof this._footer!=="undefined"){this.getRootPaneContainer().removeAllPanes();this._paneMainFooter.setContent(this._footer);this.getRootPaneContainer().addPane(this._paneMainContainer);this.getRootPaneContainer().addPane(this._paneMainFooter)}if(s&&window.document.getElementById(this._paneMainContainer.getParent().getParent().getId())){var m=52;var w=window.document.getElementById(this._paneMainContainer.getParent().getParent().getId()).getBoundingClientRect().height;var L=w-m;this._paneMainContainer.setLayoutData(new t({size:"".concat(L,"px"),resizable:false}));this._paneMainFooter.setLayoutData(new t({size:"".concat(m,"px"),resizable:false}))}else{this._paneMainContainer.setLayoutData(new t({size:"100%",resizable:false}));this._paneMainFooter.setLayoutData(new t({size:"0%",resizable:false}))}var z=function e(){p.getModel().notifySubscribers(d.ESHSearchLayoutChanged)};var F=jQuery(".sapUiFixFlexFixed");F.one("transitionend",z)}});return f})})();