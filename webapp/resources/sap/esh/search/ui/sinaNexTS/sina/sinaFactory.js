/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../core/util","./Sina","../providers/abap_odata/Provider","../providers/hana_odata/Provider","../providers/sample/Provider","../providers/inav2/Provider","../providers/dummy/Provider","../providers/multi/Provider","../core/Log","../core/errors","./SinaConfiguration"],function(r,e,n,i,o,t,a,v,u,s,c){var d=e["Sina"];var f=n["Provider"];var l=i["Provider"];var p=o["Provider"];var P=t["Provider"];var g=a["Provider"];var A=v["MultiProvider"];var h=s["NoValidEnterpriseSearchAPIConfigurationFoundError"];var b=c["AvailableProviders"];var m=c["_normalizeConfiguration"];function w(r,e,n){if(n){return e?e(r):r}if(!r||!r.then){r=Promise.resolve(r)}return e?r.then(e):r}var y=function r(e){return _(D,function(r){if(!r){return}if(e.length===1){U(e[0],r)}else{var n=false;for(var i=0;i<e.length;++i){var o=e[i];if(o.provider===b.DUMMY){continue}if(o.provider!==r.provider){e.splice(i,1);i--;continue}n=true;U(o,r)}if(!n){e.splice(0,0,r)}}})};function L(r){return function(){for(var e=[],n=0;n<arguments.length;n++){e[n]=arguments[n]}try{return Promise.resolve(r.apply(this,e))}catch(r){return Promise.reject(r)}}}var M=L(function(r,e){var n=this;var i=new u.Log("sinaFactory");e=e||function(){return true};var o=[];var t=function(n){if(n>=r.length){return Promise.reject(new h(o.join(", ")))}var a=r[n];o.push(a.provider);return E(a).then(function(r){if(e(r)){return r}return t(n+1)},function(r){i.info(r);return t(n+1)})}.bind(n);return t(0)});function _(r,e,n){if(n){return e?e(r()):r()}try{var i=Promise.resolve(r());return e?i.then(e):i}catch(r){return Promise.reject(r)}}var D=L(function(){var e=r.getUrlParameter("sinaConfiguration");if(e){return m(e)}var n=r.getUrlParameter("sinaProvider");return n?m(n):Promise.resolve()});var E=L(function(r){return w(m(r),function(r){if(r.logTarget){u.Log.persistency=r.logTarget}if(typeof r.logLevel!=="undefined"){u.Log.level=r.logLevel}var e=new u.Log("sinaFactory");e.debug("Creating new eshclient instance using provider "+r.provider);var n;switch(r.provider){case b.HANA_ODATA:{n=new l;break}case b.ABAP_ODATA:{n=new f;break}case b.INAV2:{n=new P;break}case b.MULTI:{n=new A;break}case b.SAMPLE:{n=new p;break}case b.DUMMY:{n=new g;break}default:{throw new Error("Unknown Provider: '"+r.provider+"' - Available Providers: "+b.HANA_ODATA+", "+b.ABAP_ODATA+", "+b.INAV2+", "+b.MULTI+", "+b.SAMPLE+", "+b.DUMMY)}}var i=new d(n);return w(i.initAsync(r),function(){return i})})});if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV&&process.env.NODE_ENV==="debug"){var N=new u.Log;u.Log.level=u.Severity.DEBUG;N.debug("SINA log level set to debug!")}function T(r,e){var n;return Promise.all(r.map(m.bind(this))).then(function(r){n=r;return y(n)}.bind(this)).then(function(){return M(n,e)}.bind(this))}function U(r,e){for(var n in e){r[n]=e[n]}}var S={__esModule:true};S.createAsync=E;S.createByTrialAsync=T;return S})})();