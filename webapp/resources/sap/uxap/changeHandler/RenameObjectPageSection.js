/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/fl/changeHandler/BaseRename"],function(e,t){"use strict";var r={propertyName:"title",changePropertyName:"newText",translationTextType:"XGRP"};var n=t.createRenameChangeHandler(r);n._getControlForRename=function(e,t){var r,n;return Promise.resolve().then(function(){return t.getAggregation(e,"subSections")}).then(function(n){r=n;if(r.length!==1){return[]}return Promise.all([t.getPropertyBindingOrProperty(r[0],"title"),t.getProperty(t.getParent(e),"subSectionLayout")])}).then(function(t){n=t[0];if(r&&r.length===1&&n&&typeof n==="object"||typeof n==="string"&&n.trim()!==""&&t[1]==="TitleOnTop"){return r[0]}return e})};n.applyChange=function(e,t,o){var a=o.modifier;var i=r.propertyName;var g=e.getText(r.changePropertyName);if(g&&typeof g==="string"){return n._getControlForRename(t,a).then(function(t){if(g.trim()===""){throw new Error("Change cannot be applied as ObjectPageSubSection's title cannot be empty")}return a.getPropertyBindingOrProperty(t,i).then(function(r){e.setRevertData(r);a.setPropertyBindingOrProperty(t,i,g);return true})})}};n.revertChange=function(t,o,a){var i=t.getRevertData(),g=a.modifier,u=r.propertyName;return n._getControlForRename(o,g).then(function(r){if(i||i===""){g.setPropertyBindingOrProperty(r,u,i);t.resetRevertData();return true}else{e.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.")}})};return n},true);