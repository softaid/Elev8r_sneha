// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/Configuration","sap/ushell/library"],function(e,t,n,r){"use strict";var i=r.ContentNodeType;var a=function(e,n,r){this._oAdapterConfig=t.get("config",r)};a.prototype.isMenuEnabled=function(){return Promise.resolve(!!this._oAdapterConfig.enabled)};a.prototype.getContentNodes=function(){var t=this._oAdapterConfig.menuData;if(!t){e.error("No menuData specified in the adapter configuration.",null,"sap.ushell.adapters.local.MenuAdapter");return Promise.reject(new Error("No menuData specified in the adapter configuration."))}if(typeof t==="object"){return Promise.resolve(t)}return fetch(t,{headers:{Accept:"application/json","Accept-Language":n.getLanguageTag()}}).then(function(e){return e.json()}).catch(function(t){e.error("Menu entries were requested but could not be loaded from JSON file",t);return Promise.reject(new Error("Menu entries could not be fetched"))})};a.prototype.getMenuEntries=function(){return this.getContentNodes().then(function(e){return e.map(function(e){var t=e.children[0];var n=this._buildMenuEntry(e,e.id,t.id);if(e.children.length>1){n.menuEntries=e.children.map(function(t){return this._buildMenuEntry(t,e.id,t.id)}.bind(this))}return n}.bind(this))}.bind(this))};a.prototype._buildMenuEntry=function(e,t,n){var r=e.type===i.Space?"Space-":"Page-";return{"help-id":r+e.id,title:e.label,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:t},{name:"pageId",value:n}]},menuEntries:[]}};return a},false);