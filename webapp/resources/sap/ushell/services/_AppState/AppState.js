// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/thirdparty/jquery"],function(t,e){"use strict";function s(e,s,r,a,o,h,c,p,_){this._oServiceInstance=e;this._sKey=s;this._sData=a;this._sAppName=o;this._sACHComponent=h;this._bTransient=c;this._bModifiable=r;this._sPersistencyMethod=p;this._oPersistencySettings=_;if(this._bModifiable){this.setData=function(e){try{this._sData=JSON.stringify(e)}catch(e){t.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined}};this.save=i.bind(this);this.delete=n.bind(this)}}function i(){var t=new e.Deferred;this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient,this._sPersistencyMethod,this._oPersistencySettings).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}function n(){var t=new e.Deferred;this._oServiceInstance._deleteAppState(this._sKey).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}s.prototype.getData=function(){var e;if(this._sData===undefined||this._sData===""){return undefined}try{e=JSON.parse(this._sData)}catch(e){t.error("Could not parse ["+this._sData+"]"+e)}return e};s.prototype.getPersistencyMethod=function(){return this._sPersistencyMethod};s.prototype.getPersistencySettings=function(){return this._oPersistencySettings};s.prototype.getKey=function(){return this._sKey};return s});