// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/base/util/ObjectPath","./_UserRecents/RecentsList","./_UserRecents/RecentActivity","./_UserRecents/RecentAppsUsage"],function(e,t,o,c,r,n,a){"use strict";var s=e.extend("sap.ushell.services.UserRecents",{constructor:function(){this.oRecentSearches=new r("RecentSearches",10,s._compareSearchItems);this.oRecentDataSources=new r("RecentDataSources",6,s._compareDataSources);this.oRecentApps=new r("RecentApps",6,s._compareApps);this.oRecentActivity=new n(500);this.oAppsUsage=new a}});s._compareSearchItems=function(e,t){var o=false;if(e.oDataSource&&t.oDataSource){if(e.oDataSource.objectName&&t.oDataSource.objectName){o=e.sTerm===t.sTerm&&e.oDataSource.objectName.value===t.oDataSource.objectName.value}if(!e.oDataSource.objectName&&!t.oDataSource.objectName){o=e.sTerm===t.sTerm}}if(!e.oDataSource&&!t.oDataSource){o=e.sTerm===t.sTerm}return o};s._compareDataSources=function(e,t){if(e.objectName&&t.objectName){return e.objectName.value===t.objectName.value}return false};s._compareApps=function(e,t){return e.semanticObject===t.semanticObject&&e.action===t.action};s.prototype.addActivity=function(e){var o=new t.Deferred;this.oRecentActivity.newItem(e).done(function(){this.oRecentActivity.getRecentItems().done(o.resolve).fail(o.reject)}.bind(this)).fail(o.reject);return o.promise()};s.prototype.clearRecentActivities=function(){return this.oRecentActivity.clearAllActivities()};s.prototype.getRecentActivity=function(){return this.oRecentActivity.getRecentItems()};s.prototype.getFrequentActivity=function(){return this.oRecentActivity.getFrequentItems()};s.prototype.noticeDataSource=function(e){var o=c.get("objectName.value",e)||"";var r=c.get("objectName",e)||"";var n=o.toLowerCase()==="$$all$$";var a=r.toLowerCase()==="$$all$$";if(!n&&!a){var s=new t.Deferred;this.oRecentDataSources.newItem(e).done(function(){this.oRecentDataSources.getRecentItems().done(s.resolve).fail(s.reject)}.bind(this)).fail(s.reject);return s.promise()}return this.oRecentDataSources.getRecentItems()};s.prototype.addDataSourceActivity=s.prototype.noticeDataSource;s.prototype.getRecentDataSources=function(){return this.oRecentDataSources.getRecentItems()};s.prototype.noticeSearch=function(e){var o=new t.Deferred;this.oRecentSearches.newItem(e).done(function(){this.oRecentSearches.getRecentItems().done(o.resolve).fail(o.reject)}.bind(this)).fail(o.reject);return o.promise()};s.prototype.addSearchActivity=s.prototype.noticeSearch;s.prototype.getRecentSearches=function(){return this.oRecentSearches.getRecentItems()};s.prototype.noticeApp=function(e){var o=new t.Deferred;this.oRecentApps.newItem(e).done(function(){this.oRecentApps.getRecentItems().done(o.resolve).fail(o.reject)}.bind(this)).fail(o.reject);return o.promise()};s.prototype.addAppActivity=s.prototype.noticeApp;s.prototype.getRecentApps=function(){return this.oRecentApps.getRecentItems()};s.prototype.addAppUsage=function(e){var t=o.getBasicHash(e);this.oAppsUsage.addAppUsage(t)};s.prototype.getAppsUsage=function(){return this.oAppsUsage.getAppsUsage()};s.hasNoAdapter=true;return s},true);