// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/UIComponent","sap/m/SearchField","sap/m/Button","sap/m/ResponsivePopover","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ushell/components/shell/SearchCEP/SearchCEP.controller","sap/base/Log","sap/ushell/resources","sap/ui/core/IconPool","sap/ushell/renderers/fiori2/search/util","sap/ushell/ui/shell/ShellHeadItem","sap/ui/Device"],function(e,t,s,i,n,r,a,o,h,l,S,c,d){"use strict";return e.extend("sap.ushell.components.shell.SearchCEP.Component",{metadata:{version:"1.109.2",library:["sap.ushell","sap.ushell.components.shell"],dependencies:{libs:["sap.m"]}},createContent:function(){try{this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.oShellHeader=sap.ui.getCore().byId("shell-header");this.oRenderer.addHeaderEndItem({id:"sf",tooltip:"{i18n>openSearchBtn}",text:"{i18n>search}",ariaLabel:"{i18n>openSearchBtn}",icon:l.getIconURI("search"),visible:true,showSeparator:false,press:this.onShellSearchButtonPressed.bind(this)},true,false);this.oShellSearchBtn=sap.ui.getCore().byId("sf");this.oShellSearchBtn.addEventDelegate({onkeydown:this._keyDownSearchBtn.bind(this)});var e={width:"90%",placeholder:h.i18n.getText("search"),tooltip:h.i18n.getText("search"),enableSuggestions:true,suggest:this.onSuggest.bind(this),search:this.onSearch.bind(this),liveChange:this.onSuggest.bind(this)};this.oSF=new t("PlaceHolderSearchField",e);this.oSF.addStyleClass("sapUiMediumMarginBeginEnd");var s=this.getScreenSize();if(s==="S"){this.initSearchSSize()}else if(s==="M"||s==="L"){this.initSearchMLSizes()}else if(s==="XL"){this.initSearchXLSize()}this.oShellHeader.setSearch(this.oSF);this.oSearchCEPController=new a}catch(e){o.info("Failed to create CEP search field content"+e)}sap.ui.getCore().getEventBus().publish("shell","searchCompLoaded",{delay:0})},initSearchSSize:function(){this.oSF.setWidth("60%");this.oShellHeader.setSearchState("COL",35,false)},initSearchMLSizes:function(){this.oShellHeader.setSearchState("COL",35,false)},initSearchXLSize:function(){this.oShellSearchBtn.setVisible(false);this.oShellHeader.setSearchState("EXP",35,false)},onSuggest:function(e){if(sap.ui.getCore().byId("CEPSearchField")){this.oSearchCEPController.onSuggest(e)}else{this.oSearchCEPController.onInit()}},onSearch:function(e){if(sap.ui.getCore().byId("CEPSearchField")){this.oSearchCEPController.onSearch(e)}},exit:function(){this.oSearchCEPController.onExit()},expandSearch:function(){this.oShellHeader.setSearchState("EXP_S",35,false);this.oSF.focus()},onShellSearchButtonPressed:function(){this.oShellSearchBtn.setVisible(false);this.expandSearch()},collapseSearch:function(){this.oShellHeader.setSearchState("COL",35,false);this.oShellSearchBtn.setVisible(true)},getScreenSize:function(){var e=d.media.getCurrentRange(d.media.RANGESETS.SAP_STANDARD_EXTENDED);if(e.from>=1440){return"XL"}else if(e.from>=1024){return"L"}else if(e.from>=600){return"M"}else if(e.from>=0){return"S"}},_keyDownSearchBtn:function(e){if(e.code===13||e.code==="Enter"){window.setTimeout(function(){this.oSF.focus()}.bind(this),500)}}})});