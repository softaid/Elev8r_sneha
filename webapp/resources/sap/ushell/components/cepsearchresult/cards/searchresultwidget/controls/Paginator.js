/*!
 * Copyright (c) 2009-2022 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/ui/core/Control","sap/m/ToggleButton","sap/ui/core/delegate/ItemNavigation","sap/ushell/components/cepsearchresult/util/appendStyleVars","sap/ui/dom/includeStylesheet"],function(t,e,i,a,n){"use strict";a(["sapUiBaseText","sapUiButtonBackground"]);n(sap.ui.require.toUrl("sap/ushell/components/cepsearchresult/cards/searchresultwidget/controls/Paginator.css"));var o=t.extend("sap.ushell.components.cepsearchresult.cards.searchresultwidget.controls.Paginator",{metadata:{properties:{pageSize:{type:"int",defaultValue:5},count:{type:"int",defaultValue:100},currentPage:{type:"int",defaultValue:1},segmentSize:{type:"int",defaultValue:6}},aggregations:{_buttons:{type:"sap.m.Button",multiple:true,hidden:true}},events:{selectPage:{}}},renderer:function(t,e){t.openStart("div",e);t.class("sapUiCEPCatPag");t.openEnd();var i=e.getAggregation("_buttons")||[];for(var a=0;a<i.length;a++){t.renderControl(i[a])}t.close("div")}});o.prototype._setCurrentPageWithEvent=function(t){this.setCurrentPage(t);var e=t-1;var i=this.getPageSize();this.fireSelectPage({page:t,startIndex:e*i,endIndex:(e+1)*i-1})};o.prototype._addButtons=function(){this.destroyAggregation("_buttons");var t=this.getPageSize();var i=Math.ceil(this.getCount()/t);var a=this.getCurrentPage();var n=this.getSegmentSize();var o=Math.ceil(i/n);var s=Math.ceil(a/n);var r=new e({icon:"sap-icon://navigation-left-arrow",enabled:a>1,visible:i>1,press:function(){this._setCurrentPageWithEvent(a-1)}.bind(this)});this.addAggregation("_buttons",r);for(var g=1;g<=i;g++){var u=new e({text:""+g,pressed:g===a,enabled:g!==a,visible:i>1&&(Math.ceil(g/n)===s||s===o&&g>i-n),press:function(t,e){return function(){t._setCurrentPageWithEvent(e)}}(this,g)});u.addStyleClass("sapUiCEPCatPagNumber");this.addAggregation("_buttons",u)}var l=new e({icon:"sap-icon://navigation-right-arrow",enabled:a<i,visible:i>1,press:function(){this._setCurrentPageWithEvent(a+1)}.bind(this)});this.addAggregation("_buttons",l)};o.prototype._removeKeyboardNavigation=function(){if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();this._oItemNavigation=null}};o.prototype._initNavigation=function(){this._removeKeyboardNavigation();this._oItemNavigation=new i;this._oItemNavigation.setCycling(false).setTableMode(true,true).setColumns(this.getAggregation("_buttons").length).setRootDomRef(this.getDomRef());var t=Array.from(this.getDomRef().querySelectorAll(".sapMBtn"));this._oItemNavigation.setItemDomRefs(t);if(this._oItemNavigation.getFocusedIndex()==-1){this._oItemNavigation.setFocusedIndex(this.getCurrentPage()-1+1)}this.addDelegate(this._oItemNavigation)};o.prototype.onBeforeRendering=function(){this._addButtons()};o.prototype.onAfterRendering=function(){this._initNavigation()};o.prototype.destroy=function(){this._removeKeyboardNavigation();this.destroyAggregation("_buttons")};return o});