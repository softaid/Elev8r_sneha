// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/integration/Extension","sap/ushell/components/cepsearchresult/util/jsSearch"],function(t,e){"use strict";var i=t.extend("sap.ushell.components.cepsearchresult.util.AppDataExtension");i.prototype.normalize=function(t){if(!Array.isArray(t)){t=[]}var e=[];t.forEach(function(t){t.visualizations.forEach(function(t){var i=t.title;if(t.subtitle){i=i+" - "+t.subtitle}e.push({title:t.title||"",subtitle:t.subtitle||"",keywords:t.keywords?t.keywords.join(" "):"",icon:t.icon||"",label:i,visualization:t,url:t.targetURL})})});return e};i.prototype.filter=function(t,i,n,r){this.searchEngine=new e({objects:t,fields:["title","subtitle","keywords"],shouldNormalize:!String.prototype.normalize,algorithm:{id:"contains-ranked",options:[50,49,40,39,5,4,51]}});return this.searchEngine.search({searchFor:i,top:r,skip:n})};i.prototype.getData=function(t,e,i){var n={results:[],totalCount:0};if(sap.ushell.Container&&sap.ushell.Container.getServiceAsync){return sap.ushell.Container.getServiceAsync("SearchableContent").then(function(r){return r.getApps().then(function(r){r=this.normalize(r);n={results:r,totalCount:r.length};if(t){n=this.filter(r,t,e,i)}return n}.bind(this))}.bind(this))}return Promise.resolve(n)};return i});