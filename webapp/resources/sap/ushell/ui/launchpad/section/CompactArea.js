//Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Control","sap/ui/events/KeyCodes","sap/ushell/library","./CompactAreaRenderer"],function(e,t,o,r){"use strict";var n=e.extend("sap.ushell.ui.launchpad.section.CompactArea",{metadata:{library:"sap.ushell",properties:{showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},enableLinkReordering:{type:"boolean",group:"Behavior",defaultValue:false}},dnd:{draggable:false,droppable:true},aggregations:{items:{type:"sap.ui.core.Control",singularName:"item",multiple:true,dnd:true}},events:{borderReached:{parameters:{event:{type:"jQuery.Event"}}},itemDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}}}},renderer:r});n.prototype.onBorderReached=this.fireBorderReached;n.prototype.onsapnext=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_RIGHT){var o=this.getFocusedItemIndex();if(o>=0&&o<this.getItems().length-1){this.focusItem(o+1);return}}this.fireBorderReached({event:e})};n.prototype.onsapprevious=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_LEFT){var o=this.getFocusedItemIndex();if(o>0){this.focusItem(o-1);return}}this.fireBorderReached({event:e})};n.prototype.onsapnextmodifiers=function(e){if(!this.getEnableLinkReordering()){return}var o=this.getFocusedItemIndex();var r=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_RIGHT&&o>-1&&o<r.length-1){this.fireItemDrop({draggedControl:r[o],droppedControl:r[o+1],dropPosition:"After",browserEvent:e})}if(e.keyCode===t.ARROW_DOWN&&o>-1){this.fireItemDrop({draggedControl:r[o],droppedControl:null,dropPosition:"After",browserEvent:e})}};n.prototype.onsappreviousmodifiers=function(e){if(!this.getEnableLinkReordering()){return}var o=this.getFocusedItemIndex();var r=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_LEFT&&o>0){this.fireItemDrop({draggedControl:r[o],droppedControl:r[o-1],dropPosition:"Before",browserEvent:e})}if(e.keyCode===t.ARROW_UP&&o>-1){this.fireItemDrop({draggedControl:r[o],droppedControl:null,dropPosition:"Before",browserEvent:e})}};n.prototype.focusItem=function(e){e=e||0;var t=this.getItems();if(e===-1||e>=t.length){e=t.length-1}if(e>=0){var o=t[e].getFocusDomRef()||t[e].getDomRef();(o.querySelector("a")||o).focus()}else{this.focus()}};n.prototype.onmousedown=function(e){var t=this.getDOMItemIndex(e.srcControl.getDomRef());var o=this.getFocusedItemIndex();if(o<0){o=0}if(t<0){window.setTimeout(function(){this.focusItem(o)}.bind(this),0)}};n.prototype.getDOMItemIndex=function(e){var t=-1;this.getItems().forEach(function(o,r){var n=o.getDomRef();if(n&&n.contains(e)){t=r}});return t};n.prototype.onfocusin=function(e){if(document.activeElement===this.getDomRef()){this.focusItem(0)}};n.prototype.getFocusedItemIndex=function(){return this.getDOMItemIndex(document.activeElement)};return n});