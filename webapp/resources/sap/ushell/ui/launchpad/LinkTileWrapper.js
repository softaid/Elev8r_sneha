// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/ui/launchpad/AccessibilityCustomData","./LinkTileWrapperRenderer"],function(e,t,i,s,o,l){"use strict";var a=i.extend("sap.ushell.ui.launchpad.LinkTileWrapper",{metadata:{library:"sap.ushell",properties:{uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},target:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},debugInfo:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},footItems:{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{}}}});a.prototype.destroy=function(e){this.destroyTileViews();i.prototype.destroy.call(this,e)};a.prototype.addTileView=function(e,i){e.setParent(null);e.addCustomData(new l({key:"tabindex",value:"-1",writeToDom:true}));t.prototype.addAggregation.call(this,"tileViews",e,i)};a.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0}};a.prototype.onAfterRendering=function(){this.fireAfterRendering()};a.prototype.onclick=a.prototype._onPress;a.prototype.onsapenter=a.prototype._launchTileViaKeyboard;a.prototype.onsapspace=a.prototype._launchTileViaKeyboard;a.prototype._launchTileViaKeyboard=function(t){e.info("Tile pressed:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");if(this.getTileActionModeActive()){return}else if(this._getTileState()==="Failed"){this._onFailedStatePress()}else if(t.target.tagName!=="BUTTON"){var i=this.getTileViews()[0],s=false;if(i.firePress){i.firePress()}else{while(i.getContent&&!s){i=i.getContent()[0];if(i.firePress){i.firePress();s=true}}}}};a.prototype._onPress=function(t){e.info("Tile pressed:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");if(!this.getTileActionModeActive()&&this._getTileState()==="Failed"){this._onFailedStatePress()}};a.prototype._onFailedStatePress=function(){if(!this.getTileActionModeActive()&&this._getTileState()==="Failed"){if(!this.FailedTileDialog){sap.ui.require(["sap/ushell/ui/launchpad/FailedTileDialog"],function(e){this.FailedTileDialog=new e;this._onFailedStatePress()}.bind(this))}else{this.FailedTileDialog.openFor(this)}return}};a.prototype._getTileState=function(){var e=this.getTileViews();var t;for(var i=0;i<e.length&&!t;++i){if(e[i].isA("sap.m.GenericTile")){t=e[i]}}if(!t){throw new Error("Could not find the wrapped Tile")}return t.getState()};a.prototype.setVisible=function(e){this.setProperty("visible",e,true);return this.toggleStyleClass("sapUshellHidden",!e)};a.prototype.setAnimationRendered=function(e){this.setProperty("animationRendered",e,true)};a.prototype._handleTileShadow=function(e,t){if(e.length){e.unbind("mouseenter mouseleave");var i,o=e.css("border").split("px")[0],l=this.getModel();if(o>0){i=e.css("border-color")}else{i=this.getRgba()}e.hover(function(){if(!l.getProperty("/tileActionModeActive")){var t=s(e).css("box-shadow"),o=t?t.split(") ")[1]:null,a;if(o){a=o+" "+i;s(this).css("box-shadow",a)}}},function(){s(this).css("box-shadow","")})}};a.prototype.setUuid=function(e){this.setProperty("uuid",e,true);return this};return a});