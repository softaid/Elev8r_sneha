sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/library","sap/ui/core/Control","sap/suite/ui/commons/MicroProcessFlow"],function(e,t,s,o,i){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),a={Error:"sap-icon://message-error",None:null,Success:"sap-icon://message-success",Warning:"sap-icon://message-warning",Information:"sap-icon://message-information"},n=s.ValueState;var c=o.extend("sap.suite.ui.commons.MicroProcessFlowItem",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:n.Standard},showIntermediary:{type:"boolean",group:"Appearance",defaultValue:false},stepWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:null},showSeparator:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{customControl:{type:"sap.ui.core.Control",multiple:false,singularName:"customControl"},intermediary:{type:"sap.ui.core.Control",multiple:false,singularName:"intermediary"}},events:{press:{allowPreventDefault:true,parameters:{item:"object"}}}},onAfterRendering:function(){this._setupEvents();this._setAccessibility()},renderer:{apiVersion:2,render:function(e,t){var s=function(){e.openStart("div");e.attr("id",t.getId()+"-separator");e.class("sapSuiteUiCommonsMicroProcessFlowItemSeparatorWrapper");e.style("width",t._getStepWidth());e.openEnd();e.openStart("div");e.class("sapSuiteUiCommonsMicroProcessFlowItemSeparator");if(!t.getShowSeparator()||r){e.class("sapSuiteUiCommonsMicroProcessFlowItemHiddenSeparator")}e.openEnd();e.close("div");if(n){o()}e.close("div")};var o=function(){var s=t.getIntermediary();e.openStart("div");e.class("sapSuiteUiCommonsMicroProcessFlowItemIntermediary");e.openEnd();if(s){e.renderControl(s)}else{e.openStart("div");e.class("sapSuiteUiCommonsMicroProcessFlowItemOnHoldElement");e.openEnd();e.close("div")}e.close("div")};var i=t.getIcon()||t._getIconByState(),r=t.getParent()._isLastItem(t),a=t.getId(),n=t.getShowIntermediary(),c=t.getCustomControl(),p=t.getTitle();e.openStart("div",t);e.class("sapSuiteUiCommonsMicroProcessFlowItemWrapper");e.openEnd();e.openStart("div");e.attr("id",a+"-item");if(p){e.attr("title",p)}e.class("sapSuiteUiCommonsMicroProcessFlowItemContent");e.openEnd("div");if(c){e.renderControl(c)}else{e.openStart("div");e.attr("id",a+"-itemContent");e.attr("tabindex","0");e.class("sapSuiteUiCommonsMicroProcessFlowItem").class("sapSuiteUiCommonsMicroProcessFlowItem"+t.getState());e.attr("aria-label",t._getAriaText());e.attr("role","option");e.attr("aria-selected","false");e.openEnd();if(i){e.renderControl(new sap.ui.core.Icon({tooltip:t.getTitle(),src:i}).addStyleClass("sapSuiteUiCommonsMicroProcessFlowItemIcon"))}e.close("div")}e.close("div");if(!r||n){s()}e.close("div")}}});c.prototype.getFocusDomRef=function(){var e=this.getCustomControl();return e?e.getFocusDomRef():this.getDomRef("itemContent")};c.prototype._setAccessibility=function(){var e=this._getAccessibleItem(),t=this._getAriaText();if(e.attr("tabindex")!=="0"){e.attr("tabindex",0)}e.attr("aria-label",t);e.attr("role","option");e.attr("aria-posinset",this._iIndex);e.attr("aria-setsize",this._iItemsCount)};c.prototype._getAccessibleItem=function(){var t=e(this.getFocusDomRef());return t.attr("tabindex")==="0"?t:this.$("item")};c.prototype._setupEvents=function(){var t=this.$("item"),s=this.hasListeners("press");t.on("touchstart click",this._click.bind(this));if(s){t.on("mousedown",function(t){e(this).addClass("sapSuiteUiCommonsMicroProcessFlowItemPressed")});t.on("mouseup",function(t){e(this).removeClass("sapSuiteUiCommonsMicroProcessFlowItemPressed")})}if(s){t.css("cursor","pointer");t.attr("role","button");t.attr("aria-hidden","true")}};c.prototype._getAriaText=function(){var e=r.getText("MICRO_PROCESS_FLOW_ITEM");switch(this.getState()){case n.Error:e+=" - "+r.getText("MICRO_PROCESS_FLOW_ERROR");break;case n.Warning:e+=" - "+r.getText("MICRO_PROCESS_FLOW_WARNING");break;case n.Success:e+=" - "+r.getText("MICRO_PROCESS_FLOW_SUCCESS");break;case n.Information:e+=" - "+r.getText("MICRO_PROCESS_FLOW_INFORMATION");break}if(this.getTitle()){e+=" - "+this.getTitle()}return e};c.prototype._isCompact=function(){return e("body").hasClass("sapUiSizeCompact")||this.$().is(".sapUiSizeCompact")||this.$().closest(".sapUiSizeCompact").length>0};c.prototype._getStepWidth=function(){var e=this.getStepWidth();if(!e){e=this._isCompact()?"1rem":"1.5rem"}return e};c.prototype._setAccessibilityData=function(e,t){this._iIndex=e;this._iItemsCount=t};c.prototype._click=function(e){var t=this.getParent();if(t){t._bKeyBoard=false}this._firePress(e)};c.prototype._firePress=function(e){if(this.hasListeners("press")){this.firePress({item:this.getFocusDomRef()});if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}}var t=document.getElementsByClassName("sapSuiteMicroProcessFlowItemSelected")[0];var s=this._getAccessibleItem()[0];if(t){t.setAttribute("aria-selected",false);t.classList.remove("sapSuiteMicroProcessFlowItemSelected")}if(s.tabIndex=="0"){s.setAttribute("aria-selected",true);s.classList.add("sapSuiteMicroProcessFlowItemSelected")}};c.prototype._getIconByState=function(){return a[this.getState()]};return c});